<!DOCTYPE html>
<html lang="pt-br">
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
    <title>DAUS - BRCGS</title>
    <meta http-equiv="refresh" content="7200;index.html">

    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.1.3/css/bootstrap.min.css">

    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
</head>
<body>

    <div id="carouselExampleIndicators" class="carousel slide carousel-fade" data-ride="carousel" data-interval="45000">
        <div class="carousel-inner" id="carousel-images"></div>
    
        <a class="carousel-control-prev" href="#carouselExampleIndicators" role="button" data-slide="prev">
            <span class="carousel-control-prev-icon" aria-hidden="true"></span>
            <span class="sr-only">Anterior</span>
        </a>
        <a class="carousel-control-next" href="#carouselExampleIndicators" role="button" data-slide="next">
            <span class="carousel-control-next-icon" aria-hidden="true"></span>
            <span class="sr-only">Próximo</span>
        </a>
    </div>
    
    <script>
        var folderId = "1QsPEudSe2lKK3Hozh3eVpRXODso9VEQA"; // ID da pasta no Google Drive
        var apiKey = "AIzaSyAFD_4b4jex6KNZJHZm85cxu1sHDv2RnH4"; // API Key
    
        fetch(`https://www.googleapis.com/drive/v3/files?q='${folderId}'+in+parents&key=${apiKey}`)
            .then(response => response.json())
            .then(data => {
                let images = data.files;
                let carouselInner = document.getElementById("carousel-images");
    
                if (!images || images.length === 0) {
                    console.log("Nenhuma imagem encontrada.");
                    return;
                }
    
                carouselInner.innerHTML = ""; 
    
                images.forEach((image, index) => {
                    if (!image.mimeType.startsWith("image/")) return;
    
                    let activeClass = index === 0 ? "active" : "";
                    let imgSrc = `https://drive.google.com/thumbnail?id=${image.id}&sz=w1000`;
    
                    let imgElement = `
                        <div class="carousel-item ${activeClass}">
                            <img class="d-block w-100" src="${imgSrc}" alt="${image.name}">
                        </div>`;
    
                    carouselInner.innerHTML += imgElement;
                });
    
                // Força a atualização do carrossel
                $('.carousel').carousel();
            })
            .catch(error => console.log("Erro ao carregar imagens do Google Drive:", error));
    </script>
    
    <script src="https://code.jquery.com/jquery-3.3.1.slim.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.3/umd/popper.min.js"></script>
    <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.1.3/js/bootstrap.min.js"></script>
</body>
</html>
